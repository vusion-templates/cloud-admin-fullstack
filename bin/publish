#!/usr/bin/env node

const fs = require('fs-extra');
const path = require('path');
const server = path.join(__dirname, '../server');
const client = path.join(__dirname, '../client');
const serverPublic = path.join(server, './app/public');
const clientBuild = path.join(client, './dist');
const clientPublic = path.join(clientBuild, './public');
const serverView = path.join(server, './app/view');
fs.ensureDirSync(serverPublic);
fs.ensureDirSync(serverView);
fs.ensureDirSync(clientPublic);
fs.copySync(clientPublic, path.join(serverPublic));
fs.copySync(clientBuild, serverView, {
    filter(file){
        const filePath = path.relative(clientBuild, file).trim();
        if (filePath.startsWith('public/') || filePath === 'public') {
            return false;
        }
        return true;
    },
});

